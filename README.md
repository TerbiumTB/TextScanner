# Text Scanner

## Дисклеймер

Это ИДЗ я решил делать на языке Golang. Конечно, учить новый язык, когда остается меньше недели до дедлайна, 
может быть не лучшей идеей. Но я провел неделю в увлекательном исследовани особенностей этого языка и микросервисной архитектуры,
поэтому я ни о чем не жалею.
Однако за неделю выучить язык нельзя, так что наверняка тут есть архитектурные проблемы из-за незнаний 
правильных реализаций на Go. 

## Запуск
Запускать происходит через утилиту `Make`. В Makefile есть следующие коиманды:

- `make build` – собрать проект 
- `make run` – запустить собранный проект
- `make stop` – остановить запущенный проект
- `make clean` – остановить запущенный проект и удалить docker volumes

Эти команды являются просто алиасами соответсвующих команд докера. Также есть команды:

- `make rerun` – остановить и запустить заново
- `make start` – собрать и запустить
- `make restart` – остановить, собрать и запустить
- `make fresh` – остановить с удалением volumes, собрать и запустить

В начале для запуска сервера требуется выполнить команду `make start`.

## Решение

Проект состоит из трех микросервисов. Каждый микросервис независим от остальных, собирается в своем Dockerfile и следует Clean Architecture

### API Gateway
API Gateway просто предоставляет централизованную точку входа для клиента и перенаправляет запросы в правильные микросервисы. 
Это реализуется встроенной библиотекой Go httpputil, которая предоставляет ReverseProxyUtil.

### File Storage
Микросервис File Storage отвечает только за хранение файлов. Сами файлы сохраняются в файловом хранилище (внутри Docker-контейнера),
которое сохраняется после перезапуска контейнера. Также в базе данных (Postgres), которая находится в отдельном контейнере и тоже сохраняется после перезапуска, 
хранится запись о файле (в том числе путь, где он находится).

Каждый файл считается уникальным и никакой проверки на уникальность не проводится. Каждой загрузке просто присваивается уникальный айдишник (UUID), 
поэтому есть возможность один и тот же файл сохранить несколько раз под одним и тем же именем.

### File Analysis
В моем проекте File Analysis занимается подсчетом статистики по файлу: кол-во символов, слов, предложений и абзацев, 
а также обращается в стороннее API для генерации картинки с облаком слов. В базе данных хранятся результаты с уже проведенными подсчетами статистики.
А в файловом хранилище находятся картинки облаков слов.


## Документация

Документация доступна для каждого сервиса отдельно.
- File Storage API: http://localhost:8080/documentation/index.html#/
- File Analysis API: http://localhost:8081/documentation/index.html#/








